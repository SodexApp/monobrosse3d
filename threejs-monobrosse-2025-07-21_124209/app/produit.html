<!DOCTYPE html>
<html>
  <head>
<script src="https://cdn.jsdelivr.net/npm/three@0.115.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.115.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.115.0/examples/js/loaders/GLTFLoader.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.0.0/html2canvas.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/three@0.115.0/examples/js/renderers/CSS3DRenderer.js"></script>

    <link rel="stylesheet" href="myStyle.css">
  </head>
 
  <body > 
    

    <div>
      <canvas id = "myCanvas"></canvas>


<button id= "animate" hidden>animer</button>
<button id="stopBtn" hidden>Stop Animation</button>

      
      </div>
      <div>
      
        <button id="start-recording" hidden >play 
           <span id="recording-indicator" style = "display:none"></span> 
        </button>
        <button id="stop-recording" hidden>pause</button>
        <button id = "sol" hidden>sol</button>
        <button id = "disc" hidden>disque</button>
       
      </div>  
    
  <script>
    
    // create the scene
var scene = new THREE.Scene();
      //Add light
      var light = new THREE.AmbientLight(0xffffff);
      scene.add(light); 

      // Create a camera
      var camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.set(2, 5, -10);
   //  camera.lookAt(0,3,0);
      
      // Create a renderer
      // var renderer = new THREE.WebGLRenderer( );
      var renderer = new THREE.WebGLRenderer({canvas: document.getElementById("myCanvas")});
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0xffffff);
      renderer.autoClearColor = true;
      document.body.appendChild(renderer.domElement);
    
    
       // create control
      controls = new THREE.OrbitControls(camera, renderer.domElement);
     const target = new THREE.Vector3(0, 2, 0);
         controls.target.copy(target);
     // controls.update();
      
    
         
      
    
    // chargement du bidon
   var bidonObj = "https://cdn.glitch.global/5bd793e6-3c08-44e5-bec2-8b45b68b56c7/bidon3D.glb?v=1680101953158";

var loader = new THREE.GLTFLoader();
loader.load(bidonObj, function(gltf) {
    myTool = gltf;

  var gltfObject = myTool.scene.children[0];
  gltfObject.position.set(0, 2.2, 0);
 
  scene.add(gltfObject);
   
   gltfObject.scale.set(.03,.03,.03);
   const yellow =  new THREE.MeshBasicMaterial({color:'#F2E8E8'});
           gltfObject.traverse(function(child) { // Traverse the object's hierarchy
                  if (child.isMesh) {
                    child.material = yellow;
                   }
             });
  });
     
 // add plane sol
    var texture = new THREE.TextureLoader().load("https://cdn.glitch.global/5bd793e6-3c08-44e5-bec2-8b45b68b56c7/carrelage.jpg?v=1675268522240");      
var geometry = new THREE.PlaneGeometry( 10, 10);
geometry.rotateX(THREE.Math.degToRad(90));
     // geometry.position.set(0,0,-5);
var material = new THREE.MeshBasicMaterial({
  map: texture,
  side: THREE.DoubleSide,
  transparent: true,
  
});
var planeSol = new THREE.Mesh( geometry, material );
scene.add( planeSol );
      planeSol.position.set(0,0,-2.5);
    
    // add stickerplane
       /////////////////////////////////////////////////////////////////
      
      var sticker = "https://cdn.glitch.global/5bd793e6-3c08-44e5-bec2-8b45b68b56c7/decapantFDS.png?v=1680509209267"
      var processTexture = new THREE.TextureLoader().load(sticker);  
      var material = new THREE.MeshBasicMaterial( { map: processTexture, side: THREE.FrontSide  }  );     
      var processPlane = new THREE.PlaneGeometry(2, 2);
     
      let processScreen = new THREE.Mesh(processPlane,material);
      processScreen.position.set(0,2,-0.8);
      processScreen.rotateY((THREE.Math.degToRad(180)));
     processScreen.name = "panneau"
      scene.add(processScreen);
    
 
    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
      
    }
    animate();
           
       </script>

</body> 
</html>
